# 成绩管理页面分页设置指南

## 如何设置每页显示的成绩数量

### 方法1：通过前端界面调整（推荐）

1. **访问成绩管理页面**
   - 打开浏览器访问成绩管理页面
   - 页面地址通常是：`/exams/scores/`

2. **使用分页选择器**
   - 在页面底部的分页导航区域
   - 右侧有"每页显示"下拉选择器
   - 可选择：10条、25条、50条、100条

3. **动态调整**
   - 选择不同的数量会自动刷新页面
   - 系统会记住您的选择（通过URL参数）

### 方法2：通过URL参数设置

直接在浏览器地址栏添加参数：
```
/exams/scores/?per_page=50
```

支持的参数值：
- `per_page=10` - 每页显示10条
- `per_page=25` - 每页显示25条（默认）
- `per_page=50` - 每页显示50条
- `per_page=100` - 每页显示100条

### 方法3：修改配置文件（管理员）

管理员可以通过修改配置文件来调整默认设置：

1. **编辑配置文件**
   ```
   文件位置：school_management/exams/config.py
   ```

2. **修改默认值**
   ```python
   PAGINATION_CONFIG = {
       'DEFAULT_PER_PAGE': 25,  # 修改这里的数字
       'PER_PAGE_OPTIONS': [10, 25, 50, 100],  # 修改可选项
       'MIN_PER_PAGE': 5,      # 最小值
       'MAX_PER_PAGE': 100,    # 最大值
   }
   ```

3. **重启Django服务**
   ```bash
   python manage.py runserver
   ```

### 方法4：直接修改代码（开发者）

开发者可以直接修改views.py文件：

1. **找到分页配置部分**
   ```python
   # 在 score_list 函数中
   per_page = request.GET.get('per_page', PAGINATION_CONFIG['DEFAULT_PER_PAGE'])
   ```

2. **修改默认值**
   ```python
   # 例如改为默认显示30条
   per_page = request.GET.get('per_page', 30)
   ```

## 当前配置说明

### 已实现的功能

✅ **动态分页选择**
- 用户可以在页面上选择每页显示数量
- 支持10、25、50、100条选项

✅ **URL参数支持**
- 通过`per_page`参数调整
- 与筛选条件兼容

✅ **配置文件管理**
- 集中管理分页配置
- 便于维护和调整

✅ **性能优化**
- 限制最大显示数量，防止性能问题
- 限制查询记录数，避免内存溢出

### 分页显示效果

```
显示第 1 - 25 条记录，共 150 条            [每页显示: 25条 ▼]

[首页] [上一页] [1] [2] [3] [4] [5] [下一页] [末页]
```

### 限制和说明

1. **数量限制**
   - 最小：5条/页
   - 最大：100条/页
   - 默认：25条/页

2. **性能考虑**
   - 最大查询2000条记录
   - 大数据量时建议使用筛选功能

3. **URL参数保持**
   - 切换分页大小时保持筛选条件
   - 自动重置到第一页

## 故障排除

### 常见问题

1. **分页选择器不显示**
   - 检查数据是否超过1页
   - 确认模板文件更新正确

2. **选择后没有效果**
   - 检查JavaScript是否正常加载
   - 查看浏览器控制台错误信息

3. **性能问题**
   - 减少每页显示数量
   - 使用筛选功能缩小数据范围

### 调试方法

1. **查看当前设置**
   ```python
   # 在Django shell中
   from school_management.exams.config import PAGINATION_CONFIG
   print(PAGINATION_CONFIG)
   ```

2. **测试URL参数**
   ```
   访问：/exams/scores/?per_page=10
   检查页面是否显示10条记录
   ```

## 进一步自定义

### 添加新的分页选项

1. **修改配置文件**
   ```python
   'PER_PAGE_OPTIONS': [5, 10, 25, 50, 100, 200]
   ```

2. **更新最大限制**
   ```python
   'MAX_PER_PAGE': 200
   ```

### 按用户角色设置不同默认值

可以在views.py中添加逻辑：
```python
if request.user.is_staff:
    default_per_page = 100  # 管理员默认显示更多
else:
    default_per_page = 25   # 普通用户默认显示较少
```

这样可以为不同用户提供更合适的默认设置。
